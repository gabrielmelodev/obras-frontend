<div class="p-6 bg-gray-50 min-h-screen">

  <!-- Header -->
  <app-tickets-header></app-tickets-header>

 <!-- Resumo -->
<div class="grid grid-cols-1 md:grid-cols-5 gap-4 mb-8">
  <div class="p-4 rounded-xl backdrop-blur-md bg-white/70 border border-white/30 shadow-md text-center">
    <p class="text-2xl font-bold text-gray-800">{{ totalTickets }}</p>
    <p class="text-sm text-gray-600">Total</p>
  </div>
  <div class="p-4 rounded-xl backdrop-blur-md bg-yellow-50/80 border border-yellow-200/40 shadow-md text-center">
    <p class="text-2xl font-bold text-yellow-600">{{ totalAbertos }}</p>
    <p class="text-sm text-gray-600">Abertos</p>
  </div>
  <div class="p-4 rounded-xl backdrop-blur-md bg-blue-50/80 border border-blue-200/40 shadow-md text-center">
    <p class="text-2xl font-bold text-blue-600">{{ totalEmAndamento }}</p>
    <p class="text-sm text-gray-600">Em Andamento</p>
  </div>
  <div class="p-4 rounded-xl backdrop-blur-md bg-green-50/80 border border-green-200/40 shadow-md text-center">
    <p class="text-2xl font-bold text-green-600">{{ totalResolvidos }}</p>
    <p class="text-sm text-gray-600">Resolvidos</p>
  </div>
  <div class="p-4 rounded-xl backdrop-blur-md bg-gray-50/80 border border-gray-200/40 shadow-md text-center">
    <p class="text-2xl font-bold text-gray-600">{{ totalFechados }}</p>
    <p class="text-sm text-gray-600">Fechados</p>
  </div>
</div>

  
  <app-tickets-filters [(filtro)]="filtroTitulo"></app-tickets-filters>


  <div class="mt-4 mb-6">
    <app-tickets-order
      [(selecionarTodos)]="selecionarTodos"
      [(ordenarPor)]="ordenarPor"
      [(ordem)]="ordem"
      (selecionarTodosChange)="toggleSelecionarTodos()"
    ></app-tickets-order>
  </div>

  
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    <app-ticket-card *ngFor="let ticket of ticketsFiltrados()"
      [ticket]="ticket"
      [(selecionado)]="ticket.selecionado"
      (verDetalhes)="verDetalhes($event)"
      (alterarStatus)="onAlterarStatus($event)">
    </app-ticket-card>
  </div>

  
  <app-ticket-modal
    [ticket]="ticketSelecionado"
    [mensagens]="mensagens"
    [(novaMensagem)]="novaMensagem"
    (enviar)="enviarMensagem()"
    (fechar)="fecharModal()"
  ></app-ticket-modal>


 
  <div *ngIf="modalNovoTicket" 
       class="fixed inset-0 flex items-center justify-center bg-black/40 z-50 p-4 backdrop-blur-sm">

    <div class="bg-white rounded-xl shadow-xl w-full max-w-lg p-6 border">
      <!-- Cabeçalho -->
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold text-gray-800">Novo Ticket</h2>
        <button (click)="modalNovoTicket=false" 
                class="text-gray-400 hover:text-gray-600 transition text-lg">✕</button>
      </div>

     
      <div class="flex flex-col gap-4">
        <input placeholder="Título do Ticket" [(ngModel)]="novoTicket.titulo" 
               class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400"/>
        <textarea placeholder="Descrição" [(ngModel)]="novoTicket.descricao" rows="4"
                  class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400"></textarea>
        <select [(ngModel)]="novoTicket.prioridade"
                class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-400 focus:border-blue-400">
          <option value="" disabled selected>Selecione a prioridade</option>
          <option value="Baixa">Baixa</option>
          <option value="Média">Média</option>
          <option value="Alta">Alta</option>
        </select>
      </div>

    
      <div class="flex justify-end gap-3 mt-6">
        <button (click)="modalNovoTicket=false" 
                class="px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-gray-700 transition">Cancelar</button>
        <button (click)="criarTicket()" 
                class="px-4 py-2 rounded-md bg-blue-600 hover:bg-blue-700 text-white font-medium">Criar</button>
      </div>
    </div>
  </div>

</div>
